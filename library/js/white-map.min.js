/*! white-map 2014-12-21 */

var WhiteMap=WhiteMap||{};WhiteMap.wmap_popup=L.Popup.extend({options:{minWidth:320,maxHeight:256,closeButton:!0,offset:[128,128],autoPanPaddingTopLeft:new L.Point(32,0),autoPanPaddingBottomRight:new L.Point(0,300),className:"wmap_popup"}}),WhiteMap.center_marker_icon=new L.divIcon({className:"center_marker_icon",iconSize:[24,24],iconAnchor:[16,16]}),WhiteMap.mm_load=function(a,b){posts=a.posts;for(var c=0;c<posts.length;c++){var d=!1,e="",f=new WhiteMap.wmap_popup,g=!1;posts[c].hasOwnProperty("title")&&(e+='<h2 class="title">',e+='<a href="'+posts[c].permalink+'">',e+=posts[c].title,e+="</a>\n",e+="</h2>\n"),(posts[c].hasOwnProperty("street")||posts[c].hasOwnProperty("postal")||posts[c].hasOwnProperty("city"))&&(e+='<div class="address">',posts[c].hasOwnProperty("street")&&posts[c].street&&(e+=posts[c].street+'<span class="divider"> </span>'),posts[c].hasOwnProperty("postal")&&posts[c].postal&&(e+=posts[c].postal+'<span class="divider"> </span>'),posts[c].hasOwnProperty("city")&&posts[c].city&&(e+=posts[c].city),e+="</div>\n"),posts[c].hasOwnProperty("description")&&(e+='<div class="description">'+posts[c].description+"</div>\n"),posts[c].hasOwnProperty("latitude")&&(g=posts[c].latitude),posts[c].hasOwnProperty("longitude")&&(lng=posts[c].longitude),(g||lng)&&(d=L.marker([g,lng],{icon:new WhiteMap.wmap_icon_0})),f.setContent(e),d.bindPopup(f),d.addTo(b),d.addEventListener("click",function(){d.setIcon(new WhiteMap.wmap_icon_1)})}},WhiteMap.set_current_location=function(a){if(!navigator.geolocation)throw new Error("Geolocation not supported by this browser.");navigator.geolocation.getCurrentPosition(function(b){var c=new L.LatLng(b.coords.latitude,b.coords.longitude);return WhiteMap.current_location=c,WhiteMap.set_map_to(c,a),WhiteMap.set_center_marker(c,a),c},function(){throw new Error("Geolocation error.")})},WhiteMap.set_map_to=function(a,b){if(!b)throw new Error("No map specified");b.panTo(a)},WhiteMap.set_center_marker=function(a,b){var c=L.marker(a,{icon:WhiteMap.center_marker_icon});if(!b)throw new Error("No map specified");c.addTo(b).setZIndexOffset(1e3)},$(document).ready(function(){if(0!==$("#map-container").length){var a=WhiteMap.wmap,b=$.parseJSON(whitemap.locations);WhiteMap.set_current_location(a),WhiteMap.mm_load(b,a)}}),$(document).ready(function(){var a=$("#menutoggle .button"),b=$("#container"),c="menu_shown";a.click(function(a){a.preventDefault(),b.hasClass(c)?b.removeClass(c):b.addClass(c)})});
//# sourceMappingURL=white-map.min.js.map