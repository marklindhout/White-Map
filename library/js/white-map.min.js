/*! white-map 2015-01-04 */

var WhiteMap=WhiteMap||{};WhiteMap.center=new L.LatLng(WhiteMap.map_default_location.latitude,WhiteMap.map_default_location.longitude),WhiteMap.map=L.map("wmap",{center:WhiteMap.center,zoom:15}),WhiteMap.map_popup=L.Popup.extend({options:{minWidth:320,maxHeight:256,closeButton:!0,offset:[128,128],autoPanPaddingTopLeft:new L.Point(32,0),autoPanPaddingBottomRight:new L.Point(0,300),className:"wmap_popup"}}),WhiteMap.map_layer=L.tileLayer(WhiteMap.map_layer.url,{attribution:WhiteMap.map_layer.attribution,opacity:WhiteMap.map_layer.opacity}).addTo(WhiteMap.map),WhiteMap.center_marker_icon=new L.divIcon({className:"center_marker_icon"}),WhiteMap.marker_normal=L.Icon.extend({options:{iconUrl:WhiteMap.map_marker_normal.url,iconSize:[WhiteMap.map_marker_normal.width,WhiteMap.map_marker_normal.height],iconAnchor:[parseInt(WhiteMap.map_marker_normal.width/2,10),WhiteMap.map_marker_normal.height]}}),WhiteMap.marker_active=L.Icon.extend({options:{iconUrl:WhiteMap.map_marker_active.url,iconSize:[WhiteMap.map_marker_active.width,WhiteMap.map_marker_active.height],iconAnchor:[parseInt(WhiteMap.map_marker_active.width/2,10),WhiteMap.map_marker_active.height]}}),WhiteMap.all_markers=[],WhiteMap.load_locations=function(){for(var a=WhiteMap.locations.posts,b=0;b<a.length;b++){var c=!1,d="",e=new WhiteMap.map_popup,f=!1;a[b].hasOwnProperty("title")&&(d+='<h2 class="title">',d+='<a href="'+a[b].permalink+'">',d+=a[b].title,d+="</a>\n",d+="</h2>\n"),(a[b].hasOwnProperty("street")||a[b].hasOwnProperty("postal")||a[b].hasOwnProperty("city"))&&(d+='<div class="address">',a[b].hasOwnProperty("street")&&a[b].street&&(d+=a[b].street+'<span class="divider"> </span>'),a[b].hasOwnProperty("postal")&&a[b].postal&&(d+=a[b].postal+'<span class="divider"> </span>'),a[b].hasOwnProperty("city")&&a[b].city&&(d+=a[b].city),d+="</div>\n"),a[b].hasOwnProperty("description")&&(d+='<div class="description">'+a[b].description+"</div>\n"),a[b].hasOwnProperty("latitude")&&(f=a[b].latitude),a[b].hasOwnProperty("longitude")&&(lng=a[b].longitude),(f||lng)&&(c=L.marker([f,lng],{icon:new WhiteMap.marker_normal})),e.setContent(d),c.bindPopup(e),c.addTo(WhiteMap.map),WhiteMap.all_markers.push(c)}},WhiteMap.get_geolocation=function(){WhiteMap.map.locate({setView:!0,maxZoom:16}),WhiteMap.map.on("locationfound",WhiteMap.map_handle_locationfound),WhiteMap.map.on("locationerror",WhiteMap.map_handle_locationerror)},WhiteMap.map_handle_locationfound=function(a){WhiteMap.set_geolocation_marker(a.latlng)},WhiteMap.map_handle_locationerror=function(){console.error("No geolocation found!")},WhiteMap.set_geolocation_marker=function(a){var b=L.marker(a,{icon:WhiteMap.center_marker_icon});b.addTo(WhiteMap.map).setZIndexOffset(1e3)},WhiteMap.reset_all_markers=function(){for(var a=0;a<WhiteMap.all_markers.length;a++){var b=WhiteMap.all_markers[a];b.setIcon(new WhiteMap.marker_normal)}},WhiteMap.markers_event_handlers=function(){for(var a=0;a<WhiteMap.all_markers.length;a++){var b=WhiteMap.all_markers[a];b.addEventListener("click",function(){WhiteMap.reset_all_markers(),this.setIcon(new WhiteMap.marker_active)})}},$(document).ready(function(){$("body").hasClass("home")&&0!==$("#map-container").length&&(WhiteMap.get_geolocation(),WhiteMap.load_locations(),WhiteMap.markers_event_handlers(),WhiteMap.reset_all_markers(),WhiteMap.map.addEventListener("click",function(){WhiteMap.reset_all_markers()}))}),$(document).ready(function(){var a=$("#menutoggle .button"),b=$("#container"),c="menu_shown";a.click(function(a){a.preventDefault(),b.hasClass(c)?b.removeClass(c):b.addClass(c)})});
//# sourceMappingURL=white-map.min.js.map