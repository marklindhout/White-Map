/*! white-map 2014-11-24 */
var WhiteMap=WhiteMap||{};WhiteMap.mm_load=function(a,b){posts=a.posts;for(var c=0;c<posts.length;c++){var d=!1,e="",f=!1;posts[c].hasOwnProperty("title")&&(e+="<h2>"+posts[c].title+"</h2>\n"),posts[c].hasOwnProperty("description")&&(e+="<p>"+posts[c].description+"</p>\n"),posts[c].hasOwnProperty("latitude")&&(f=posts[c].latitude),posts[c].hasOwnProperty("longitude")&&(lng=posts[c].longitude),(f||lng)&&(d=L.marker([f,lng],{icon:new WhiteMap.wmap_icon_0})),d.bindPopup(e),d.addTo(b)}},WhiteMap.get_location=function(){if(!navigator.geolocation)throw new Error("Geolocation not supported by this browser.");navigator.geolocation.getCurrentPosition(function(a){var b=new L.LatLng(a.coords.latitude,a.coords.longitude);WhiteMap.set_map_to(b,WhiteMap.wmap)},function(){throw new Error("Geolocation error.")})},WhiteMap.set_map_to=function(a,b){if(!b)throw new Error("No map specified");b.panTo(a)},$(document).ready(function(){0!==$("#map-container").length&&WhiteMap.get_location()}),$(document).ready(function(){if(0!==$("#map-container").length){var a=$.parseJSON(whitemap.locations);WhiteMap.mm_load(a,WhiteMap.wmap),WhiteMap.get_location()}}),$(document).ready(function(){var a=$("#menutoggle .button"),b=$("#container"),c="menu_shown";a.click(function(a){a.preventDefault(),b.hasClass(c)?b.removeClass(c):b.addClass(c)})});